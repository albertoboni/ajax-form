/*! ajax-form v0.2.0 | Alberto Boni | 2015-10-09 */
function AjaxForm(a){this._lock=!1,this._selector_prefix="ajaxform-",this.form_selector=a.form_selector,this.feedback_selector=a.feedback_selector?a.feedback_selector:"".concat("#",this._selector_prefix,"feedback"),this.feedback_icon_selector=a.feedback_icon_selector?a.feedback_icon_selector:"".concat("#",this._selector_prefix,"feedback_icon"),this.feedback_html_success=a.feedback_html_success?a.feedback_html_success:$("<img>").attr("src","images/ajax-success.png").prop("outerHTML"),this.feedback_html_loading=a.feedback_html_loading?a.feedback_html_loading:$("<img>").attr("src","images/ajax-loading.png").prop("outerHTML"),this.feedback_html_error=a.feedback_html_error?a.feedback_html_error:$("<img>").attr("src","images/ajax-error.png").prop("outerHTML"),this.ajax_data=a.ajax_data,this.ajax_url=a.ajax_url?a.ajax_url:$(this.form_selector).attr("action"),this.ajax_method=a.ajax_method?a.ajax_method:$(this.form_selector).attr("method"),this.validation=a.validation?a.validation:function(){return!0},this.preajax_callback=a.preajax_callback?a.preajax_callback:function(){},this.success_callback=a.success_callback?a.success_callback:function(a){},this.error_callback=a.error_callback?a.error_callback:function(a){},this.$feedback_icon=$(this.feedback_icon_selector),this.$form=$(this.form_selector),this.$feedback=$(this.feedback_selector),this.submit=function(){var a=this;return a._lock||!a.validation()?!1:(a._lock=!0,a._clear_feedback(),a._display_loading_icon(a.form_selector),a.preajax_callback(),void $.ajax({url:a.ajax_url,type:a.ajax_method,dataType:"json",data:a.ajax_data?a.ajax_data:a.$form.serialize(),success:function(b){a._lock=!1,b.result?(a._display_result_icon("success"),a.success_callback(b)):(a._display_result_icon("error"),a.error_callback(b)),a.print_feedback(b.feedback_message,!1)},error:function(b){a._lock=!1,a._display_result_icon("error"),a.error_callback(b)}}))},this.print_feedback=function(a,b){var c=this;return a?(this.$feedback.show().html(a),void(b&&setTimeout(function(){c.$feedback.slideUp(250,function(){$(this).empty().css("display","block")})},3500))):!1},this._clear_feedback=function(){this.$feedback.empty().hide()},this._display_loading_icon=function(){this.$feedback_icon.length&&this.$feedback_icon.show().html(this.feedback_html_loading)},this._display_result_icon=function(a){switch(this.$feedback_icon.length||this.$feedback_icon.hide(),a){case"error":this.$feedback_icon.show().html(this.feedback_html_error);break;case"success":this.$feedback_icon.show().html(this.feedback_html_success);break;default:this.$feedback_icon.hide()}};var b=this;this.$form.find("option, select, input").keypress(function(a){13==a.which&&b.submit()}),this.$form.submit(function(a){b.submit(),a.preventDefault()})}