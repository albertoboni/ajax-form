/*! ajax-form v0.1.2 | Alberto Boni | 2015-09-08 */
function AjaxForm(a){this._lock=!1,this.ajax_icons={loading:"/images/ajax-loader.gif",success:"/images/ajax-success.",error:"/images/ajax-error.png"},this._selector_prefix="ajaxform-",this.ajax_icon_selector=a.ajax_icon_selector?a.ajax_icon_selector:"".concat(".",this._selector_prefix,"icon"),this.form_selector=a.form_selector,this.feedback_selector=a.feedback_selector?a.feedback_selector:"".concat("#",this._selector_prefix,"feedback"),this.ajax_data=a.ajax_data,this.ajax_url=a.ajax_url?a.ajax_url:$(this.form_selector).attr("action"),this.ajax_method=a.ajax_method?a.ajax_method:$(this.form_selector).attr("method"),this.validation=a.validation?a.validation:function(){return!0},this.preajax_callback=a.preajax_callback?a.preajax_callback:function(){},this.success_callback=a.success_callback?a.success_callback:function(a){},this.error_callback=a.error_callback?a.error_callback:function(a){},this._form=$(this.form_selector),this._feedback=$(this.feedback_selector),this.submit=function(){var a=this;return a._lock||!a.validation()?!1:(a._lock=!0,a._clear_feedback(),a._display_loading_icon(a.form_selector),a.preajax_callback(),void $.ajax({url:a.ajax_url,type:a.ajax_method,dataType:"json",data:a.ajax_data?a.ajax_data:a._form.serialize(),success:function(b){a._lock=!1,b.result?(a._display_result_icon(a.form_selector,"success"),a.success_callback(b)):(a._display_result_icon(a.form_selector,"error"),a.error_callback(b)),a.print_feedback(b.feedback_message,!1)},error:function(b){a._lock=!1,a._display_result_icon(a.form_selector,"error"),a.error_callback(b)}}))},this.print_feedback=function(a,b){var c=this;return a?(this._feedback.show().html(a),void(b&&setTimeout(function(){c._feedback.slideUp(250,function(){$(this).empty().css("display","block")})},3500))):!1},this._clear_feedback=function(){this._feedback.empty().hide()},this._display_loading_icon=function(){selector=this._form.find(this.ajax_icon_selector.concat(":eq(0)")),$(selector).length&&$(selector).show().attr("src",this.ajax_icons.loading)},this._display_result_icon=function(a){return selector=this._form.find(this.ajax_icon_selector.concat(":eq(0)")),"error"!=a&&"success"!=a?void $(selector).hide():($(selector).attr("src",this.ajax_icons[a]).show(),void setTimeout(function(){},2e3))};var b=this;this._form.find("option, select, input").keypress(function(a){13==a.which&&b.submit()}),this._form.submit(function(a){b.submit(),a.preventDefault()})}